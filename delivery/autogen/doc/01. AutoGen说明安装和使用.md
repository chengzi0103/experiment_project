---
tags:
  - AutoGen
  - 安装
  - 说明
Create Time: 2024-04-18T10:26:00
Update Time: "{{date}},{{time}}"
Title: AutoGen说明安装和使用
---
# 1, AutoGen说明

**Agent可以理解为某种能自主理解、规划决策、执行复杂任务的智能体**

**AutoGne专为代理式人工智能（Agentic AI）设计，通过促进多个可对话AI代理之间的协作，简化了大型语言模型应用程序的开发与管理流程**

### AutoGen优点
- 框架解决了复杂Agent工作流的编排、自动化和优化。它最大限度地提高了LLM模型的性能。它使得基于多代理对话构建下一代agent应用变得更加简单，几乎不需要太多努力。
- 它允许开发者使用和定义多个可以相互对话的代理（agents）来解决任务，从而开发基于agent（大型语言模型）应用程序。这些代理是可定制的、能够进行对话的，并且无缝地允许人类参与。它们可以在使用LLM、人类输入和工具的组合中以不同模式运行。
- 提供增强的LLM推理功能，包括API统一、缓存以及高级使用模式，如错误处理、多配置推理、上下文编程、Rag检索等等。


**来源**:

这个框架由微软、宾夕法尼亚州立大学和华盛顿大学的合作研究支持。
~~~/url
https://github.com/microsoft/autogen
~~~



# 2, 安装和简单的使用

## 2.1 安装Pyautogen
~~~ /shell
pip install pyautogen
~~~

## 2.2 安装插件

### 2.2.1 Llm缓存
要在 Redis 中使用LLM缓存，您需要使用以下选项 `redis` 安装 Python 包：
``` /shell
pip install "pyautogen[redis]"
```
**参考**:
~~~/url
https://microsoft.github.io/autogen/docs/topics/llm-caching
~~~
### 2.2.2  retrievechat 检索聊天

`pyautogen` 支持检索增强生成任务，例如使用 RAG 代理进行问答和代码生成。请使用 [retrievechat] 选项进行安装以将其与 ChromaDB 一起使用
~~~/shell
pip install "pyautogen[retrievechat]"

pip install "pyautogen[retrievechat-pgvector]"

pip install "pyautogen[retrievechat-qdrant]"
~~~

RetrieveChat可以处理各种类型的文档。默认情况下，它可以处理纯文本和 PDF 文件，包括 'txt'、'json'、'csv'、'tsv'、'md'、'html'、'htm'、'rtf'、'rst'、'jsonl'、'log'、'xml'、'yaml'、'yml' 和 'pdf' 等格式。如果安装非结构化 （ `pip install "unstructured[all-docs]"` ），则还将支持其他文档类型，例如 'docx'、'doc'、'odt'、'pptx'、'ppt'、'xlsx'、'eml'、'msg'、'epub'。

**参考**:
- https://github.com/microsoft/autogen/blob/main/notebook/agentchat_RetrieveChat.ipynb
- https://github.com/microsoft/autogen/blob/main/notebook/agentchat_groupchat_RAG.ipynb
- https://github.com/microsoft/autogen/blob/main/notebook/agentchat_qdrant_RetrieveChat.ipynb


## 2.2.3 更多插件请查看
~~~
https://microsoft.github.io/autogen/docs/installation/Optional-Dependencies/
~~~


# 3, 框架代理说明


AutoGen 抽象并实现了设计用于通过代理间对话解决任务的可对话代理。具体来说，AutoGen 中的代理具有以下显著特点：

- **可对话**：AutoGen 中的代理是可对话的，这意味着任何代理都可以从其他代理发送和接收消息以启动或继续对话。
- **可定制**：AutoGen 中的代理可以定制，以集成LLMs、人类、工具或它们的组合,Prompt定制。


![[autogen_agent详细说明.png]]



为了代理间能够通过消息交换共同完成任务，我们设计了一个通用的 `ConversableAgent` 类。代理可以与其他代理通信并执行动作。不同的代理在接收消息后执行的动作可能会有所不同。两个代表性的子类是 `AssistantAgent` 和 `UserProxyAgent`：

- **`AssistantAgent`** 概念上是设计为充当AI助手，默认使用LLMs，但不需要人类输入或代码执行。当接收到消息时（通常是需要解决的任务描述），它可以编写Python代码（在Python代码块中）供用户执行。在底层，Python代码由LLM（例如，GPT-4）编写。它还可以接收执行结果并建议更正或修复bug。通过传递新的系统消息，可以更改其行为。LLM推理配置可以通过 `llm_config` 配置。
  
- **`UserProxyAgent`** 在概念上是人类的代理，通过默认情况下请求人类输入作为每次交互回合的代理回复，并且还具有执行代码和调用函数或工具的能力。当 `UserProxyAgent` 检测到接收到的消息中存在可执行代码块且没有提供人类用户输入时，会自动触发代码执行。通过将 `code_execution_config` 参数设置为False可以禁用代码执行。默认情况下禁用基于LLM的回复。通过将 `llm_config` 设置为对应于推理配置的字典，可以启用基于LLM的回复。当未执行代码执行时，`UserProxyAgent` 可以使用LLM生成回复。

- **`ConversableAgent (In preview)`** 一个用于通用可对话代理的类，可以配置为助手或用户代理。`UserProxyAgent`和`AssistantAgent` 都是它的子类.如果你需要自己编写一个自定义的助手,那么你应该把它作为一个父类,重构里面的某些方法. 例如,要修改自动回复，请重写 `generate_reply` 方法。要在每个回合中禁用/启用人类响应，将 `human_input_mode` 设置为 "NEVER" 或 "ALWAYS"。要修改获取人类输入的方式，请重写 `get_human_input` 方法。要修改执行代码块、单个代码块或函数调用的方式，请分别重写 `execute_code_blocks`、`run_code` 和 `execute_function` 方法。

-------------------------------------------------------------------------------------
![[autogen_manage说明.png]]

- **`Group Chat`** 是AutoGen 提供的一种更通用的对话模式，它通常涉及两个或以上的Agent需要共同实现某个任务。核心思想是所有Agent都为单个对任务做出贡献，并共享相同的上下文。这对于需要多个Agent之间协作的任务非常有用。

- **`GroupChatManager`** 由特殊Agent类型GroupChatManager编排，第一步GroupChatManager 会选择一个Agent发言。然后，被选中的Agent发言，并将消息发回给GroupChatManager，GroupChatManager再将消息广播给群组中的所有其他Agent。 此过程重复进行，直到对话停止 GroupChatManager可以使用多种策略来选择下一个Agent




**来源**:
- https://microsoft.github.io/autogen/docs/Use-Cases/agent_chat/

